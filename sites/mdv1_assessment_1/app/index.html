<!--
* Author: Conor O'Mahony
* Assignment: Mobile and Device Development I - Assessment 1
* Student ID: STU-00001490 
* Date: 2018/04/04
* Refs: 
-->


<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Page Title</title>

    <!-- ThemeRoller CSS -->
    <link rel="stylesheet" href="./css/themes/cons-custom-theme.css" />
    <link rel="stylesheet" href="./css/themes/jquery.mobile.icons.min.css" />

    <!-- CDN hosted CSS and JS files (Not used)-->
    <!-- <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
    <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script> -->

    <!-- Local CSS files -->
    <!-- jquery.mobile.structure css is for use with Themeroller custom theme -->
    <link rel="stylesheet" href="./css/jquery.mobile.structure-1.4.5.min.css">
    <link rel="stylesheet" href="./css/custom.css">

    <!-- Local JS files -->
    <script src="./js/jquery-1.11.1.min.js"></script>
    <script src="./js/jquery.mobile-1.4.5.min.js"></script>

</head>

<body>
    <!-- Main Page -->
    <div data-role="page" data-theme="b">

        <div data-role="header">
            <h1>Adopt-an-Animal</h1>
            <img src="./img/my_logo.png" class="ui-btn-left" />
        </div>
        <!-- /header -->
        <div role="main" class="ui-content">
            <ul id="main-list" data-role="listview" data-inset="true" data-filter="true" data-autodividers="true" data-divider-theme="b">

            </ul>
        </div>
        <!-- /content -->
        <div data-role="footer">
            <h4>Copyright&copy; AnimaList 2018</h4>
        </div>
        <!-- /footer -->
    </div>
    <!-- /page Main Page -->

    <script>
        $(document).on("pageinit", function () {
            // Load JSON data
            // use Promise Interface .done() method to process
            $.getJSON("./data/list-items.json").done(function (data) {
                var listItems = data.items;
                listItems.sort(sortByName);
                var listhtml = "";
                // create <li> for each object
                $.each(listItems, function (i, item) {
                    listhtml += '<li><a href="#"><img src="' + item.avatar + '"/>' + item.animal_name +
                        ' - ' + item.name + ' the ' + item.animal_name + '</a></li>';
                });
                $('#main-list').html(listhtml);
                // https://api.jquerymobile.com/listview/#method-refresh 
                $('#main-list').listview('refresh');
            });
        });

        // sort my list items
        function sortByName(a, b) {
            var aName = a.animal_name.toLowerCase();
            var bName = b.animal_name.toLowerCase();
            return ((aName < bName) ? -1 : ((aName > bName) ? 1 : 0));
        }
    </script>
</body>

</html>

</html>