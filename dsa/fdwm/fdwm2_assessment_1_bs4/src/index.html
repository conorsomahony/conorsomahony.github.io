<!--
* Author: Conor O'Mahony
* Assignment: FDWM2 Assessment 1 - Street Art Finder
* Student ID: STU-00001490
* Date: 2018/02/26
* Refs:  

Initial setup is based on: 
- https://coursetro.com/posts/code/130/Learn-Bootstrap-4-Final-in-2018-with-our-Free-Crash-Course
- https://www.youtube.com/watch?v=Mu74UmFBAq8&t=3s

Other references:
- https://getbootstrap.com/docs/4.0/getting-started/introduction/
- https://getbootstrap.com/docs/4.0/components/modal/

Technologies:
Bootstrap 4, with JQuery, Popper.js, SASS, FontAwesome 5
-->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Street Art Finder!</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.6/css/all.css">

    <!-- Bootstrap 4 imported into main.sass and compiled into main.css -->
    <link rel="stylesheet" href="./css/bootstrap.css">
    <link rel="stylesheet" href="./css/main.css">

</head>

<body>

    <!-- header -->
    <header role="navigation">
        <!-- nav -->
        <nav class="navbar navbar-expand-sm navbar-dark bg-dark">
            <a class="navbar-brand" href="#">
                <img src="./assets/img/streetart-logo_orig_trans.png" class="cons-nav-logo">
            </a>

            <!-- toggle -->
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#account" aria-controls="navbarResponsive"
                aria-expanded="false" aria-label="Toggle navigation">
                <i class="fa fa-user fa-2x"></i>
            </button>

            <div class="collapse navbar-collapse" id="account">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item ml-auto">
                        <a class="nav-link" href="#">Sign in</a>
                    </li>
                    <li class="nav-item ml-auto">
                        <a class="nav-link" href="#">Register</a>
                    </li>
                </ul>
            </div>
        </nav>
        <!-- end-of nav -->
    </header>
    <!-- end-of header -->

    <!-- main -->
    <main role="main">

        <!-- "CAROUSEL" -->
        <div class="container-fluid">
            <div class="row no-gutters">
                <div class="col-12">
                    <div id="myCarousel" class="carousel slide" data-ride="carousel">
                        <ol class="carousel-indicators">
                            <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                            <li data-target="#myCarousel" data-slide-to="1"></li>
                            <li data-target="#myCarousel" data-slide-to="2"></li>
                        </ol>
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img class="d-block w-100 img-fluid" src="./assets/img/streetart_1.jpg" alt="First slide">
                            </div>
                            <div class="carousel-item">
                                <img class="d-block w-100 img-fluid" src="./assets/img/streetart_2.jpg" alt="Second slide">
                            </div>
                            <div class="carousel-item">
                                <img class="d-block w-100 img-fluid" src="./assets/img/streetart_3.jpg" alt="Third slide">
                            </div>
                        </div>
                        <a class="carousel-control-prev" href="#myCarousel" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#myCarousel" role="button" data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- end-of "CAROUSEL" -->

        <!-- "TOP LEVEL DARK" .container -->
        <div class="container text-light bg-dark">
            <!-- "INFORMATION" section -->
            <section>
                <div class="container mt-3">
                    <div class="row">
                        <div class="col text-center my-5">
                            <h1 class="cons-display-font">How to use StreetArt Finder</h1>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-4 text-center">
                            <span class="fa-stack fa-3x">
                                <i class="fa fa-circle fa-stack-2x text-info"></i>
                                <strong class="fa-stack-1x text-light">1</strong>
                            </span>
                            <h3 class="text-info cons-display-font my-3">Take a photo</h3>
                            <p>Take a photo with your phone</p>
                        </div>
                        <div class="col-md-4 text-center">
                            <span class="fa-stack fa-3x">
                                <i class="fa fa-circle fa-stack-2x text-info"></i>
                                <strong class="fa-stack-1x text-light">2</strong>
                            </span>
                            <h3 class="text-info cons-display-font my-3">Upload it</h3>
                            <p>Upload it to StreetArt Finder</p>
                        </div>
                        <div class="col-md-4 text-center">
                            <span class="fa-stack fa-3x">
                                <i class="fa fa-circle fa-stack-2x text-info"></i>
                                <strong class="fa-stack-1x text-light">3</strong>
                            </span>
                            <h3 class="text-info cons-display-font my-3">Tag it</h3>
                            <p>Tag it so everyone can find it</p>
                        </div>
                    </div>
                </div>
            </section>
            <!-- end-of "INFORMATION" section -->

            <!-- ALBUM section-->
            <section>
                <div class="container-fluid text-dark">
                    <div class="row">
                        <!-- .card -->
                        <div class="col-lg-6 mb-4">
                            <div class="card h-100">
                                <img class="card-img-top" src="./assets/img/streetart_1.jpg" alt="Card image cap">
                                <div class="card-body">
                                    <h4 class="card-title">Cool Vista</h4>
                                    <p class="card-text">Lorem ipsum dolor sit amet consectetur adipisicing elit. Reprehenderit, consectetur neque,
                                        consequuntur est temporibus dolor debitis et, ullam excepturi soluta harum magnam
                                        ut ad maiores deleniti accusamus doloremque numquam vero voluptatibus fugiat in corrupti
                                        cumque ipsam ipsum! Ab, recusandae sit.</p>
                                </div>
                                <div class="card-footer">
                                    <h5>
                                        <span class="badge badge-secondary">Location</span>
                                        <span class="badge badge-info">#Hashtag</span>
                                    </h5>
                                </div>
                            </div>
                            <!-- end-of .card -->
                        </div>
                        <div class="col-lg-6 mb-4">
                            <!-- .card -->
                            <div class="card h-100">
                                <img class="card-img-top" src="./assets/img/streetart_2.jpg" alt="Card image cap">
                                <div class="card-body">
                                    <h4 class="card-title">Political Satire</h4>
                                    <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Provident illo libero reprehenderit?
                                        Exercitationem blanditiis molestiae quod iste repellendus delectus dicta laudantium,
                                        impedit minus rem ab error ex rerum ratione animi?
                                    </p>
                                </div>
                                <div class="card-footer">
                                    <h5>
                                        <span class="badge badge-secondary">Location</span>
                                        <span class="badge badge-info">#Hashtag</span>
                                    </h5>
                                </div>
                            </div>
                            <!-- end-of .card -->
                        </div>
                        <div class="col-lg-6 mb-4">
                            <!-- .card -->
                            <div class="card h-100">
                                <img class="card-img-top" src="./assets/img/streetart_3.jpg" alt="Card image cap">
                                <div class="card-body">
                                    <h4 class="card-title">Buenos Aires Bunny</h4>
                                    <p class="card-text">Lorem ipsum dolor, sit amet consectetur adipisicing elit. Id necessitatibus sit tempora,
                                        esse ullam, provident magni placeat cum natus perferendis nam aperiam inventore eos
                                        neque et in amet harum sequi eligendi quo alias quis. Veniam?</p>
                                </div>
                                <div class="card-footer">
                                    <h5>
                                        <span class="badge badge-secondary">Location</span>
                                        <span class="badge badge-info">#Hashtag</span>
                                    </h5>
                                </div>
                            </div>
                            <!-- end-of .card -->
                        </div>
                        <div class="col-lg-6 mb-4">
                            <!-- .card -->
                            <div class="card h-100">
                                <img class="card-img-top" src="./assets/img/streetart_4.jpg" alt="Card image cap">
                                <div class="card-img-overlay">
                                    <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#exampleModal" data-image-title="Madrid Master">Share&NonBreakingSpace;
                                        <i class="fa fa-share-alt" aria-hidden="true"></i>
                                    </button>
                                </div>
                                <div class="card-body">
                                    <h4 class="card-title">Madrid Master</h4>
                                    <p class="card-text">Lorem ipsum, dolor sit amet consectetur adipisicing elit. Enim aspernatur, alias autem
                                        deleniti tenetur atque eveniet ut quo ipsum dolorum fuga aliquam voluptate blanditiis
                                        quis hic vel exercitationem sint corrupti a consectetur. Non, atque? Sapiente, iusto
                                        doloremque? Illo quisquam impedit laudantium corrupti molestias dignissimos atque!</p>
                                </div>
                                <div class="card-footer">
                                    <h5>
                                        <span class="badge badge-secondary">Location</span>
                                        <span class="badge badge-info">#Hashtag</span>
                                    </h5>
                                </div>
                            </div>
                        </div>
                        <!-- end-of .card -->
                    </div>
                </div>
            </section>
            <!-- end-of "ALBUM" section -->
        </div>
        <!-- end-of "TOP LEVEL DARK" .container -->

        <!-- "TOP LEVEL LIGHT" .container -->
        <div class="container-fluid text-dark bg-light">
            <!-- "UPLOAD" -->
            <div class="row">
                <div class="col text-center">
                    <div class="my-4">
                        <h3>Upload</h3>
                    </div>
                </div>
            </div>
            <div class="row">
                <!-- "UPLOAD INFO" -->
                <div class="col-md-6 order-2 order-md-1">
                    <div class="card bg-info text-light mb-4">
                        <div class="card-body">
                            <h4 class="card-title">How to</h4>
                            <p class="card-text">
                                Lorem ipsum dolor sit, amet consectetur adipisicing elit. Nostrum quis cupiditate ratione aperiam natus. Vitae deleniti excepturi,
                                facilis nisi quis quasi? Sint minus vel, neque dolorum sit enim ea facere? Lorem, ipsum dolor
                                sit amet consectetur adipisicing elit. Nobis, sit labore! Tenetur, laudantium ipsam deserunt
                                officiis asperiores quis recusandae quos doloremque sit molestiae inventore illum soluta
                                totam ipsum officia voluptatibus.
                            </p>
                        </div>
                    </div>
                </div>
                <!-- end-of "UPLOAD INFO" -->

                <!-- "UPLOAD" form -->
                <div class="col-md-6 order-1 order-md-2">
                    <div class="card mb-4">
                        <div class="card-body">
                            <div class="card-title d-none d-md-block h4 text-center">
                                Upload here
                            </div>
                            <form>
                                <div class="form-group">
                                    <label for="photo-name">Photo Name</label>
                                    <input type="text" class="form-control" id="photo-name" placeholder="Photo Name">
                                </div>
                                <div class="form-group">
                                    <label for="photo-hashtag">Hashtag</label>
                                    <input type="text" class="form-control" id="photo-hashtag" placeholder="#">
                                </div>
                                <div class="form-group">
                                    <label for="photo-description">Description</label>
                                    <input type="text" class="form-control" id="photo-description" placeholder="Description">
                                </div>
                                <div class="custom-file">
                                    <input type="file" class="custom-file-input" id="customFile" accept="image/*">
                                    <label class="custom-file-label" for="customFile">Choose file</label>
                                </div>
                                <div class="form-group">
                                    <button type="submit" class="btn btn-secondary btn-lg text-dark mt-3 w-100">Upload</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- end-of "UPLOAD" form -->
            </div>
            <!-- end-of "UPLOAD" -->
        </div>
        <!-- end-of "TOP LEVEL LIGHT" -->
    </main>
    <!-- end-of main -->


    <!-- footer -->
    <footer class="text-center text-light">
        <div>
            Copyright &copy; 2018 Street Art Finder
        </div>
    </footer>
    <!-- end-of footer -->

    <!-- "MODAL SHARE DIALOG" -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Temporary text</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Temporary text2
                </div>
                <div class="modal-footer">
                    <div>
                        <button class="btn btn-primary">
                            <i class="fab fa-facebook-square fa-2x"></i>
                        </button>
                        <button class="btn btn-primary">
                            <i class="fab fa-twitter fa-2x"></i>
                        </button>
                        <button class="btn btn-primary">
                            <i class="fab fa-instagram fa-2x"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- end-of "MODAL SHARE DIALOG" -->

    <script src="/js/jquery.min.js"></script>
    <script src="/js/popper.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script>
        getLocation();
        setInterval(getLocation, 5000);

        // get location and store to local storage
        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function (position) {
                    var latitude = position.coords.latitude;
                    var longitude = position.coords.longitude;
                    localStorage.setItem("latitude", latitude);
                    localStorage.setItem("longitude", longitude);
                    var latlng = {
                        lat: parseFloat(latitude),
                        lng: parseFloat(longitude)
                    };
                    var geocoder = new google.maps.Geocoder;
                    geocoder.geocode({
                        'location': latlng
                    }, function (results, status) {
                        if (status === 'OK') {
                            if (results[0]) {
                                // store formatted address
                                localStorage.setItem("locationText", results[0].formatted_address)
                                // store shorter address information
                                var res, locality, country = '';
                                var components = results[0].address_components;
                                for (var component = 0; component < (components.length); component++) {
                                    if (components[component].types[0] == "locality") {
                                        locality = components[component].long_name;
                                    }
                                    if (components[component].types[0] == "country") {
                                        country = components[component].long_name;
                                    }
                                }
                                res = locality + ', ' + country;
                                localStorage.setItem("shortLocationText", res);
                            } else {
                                console.warn('No results found');
                            }
                        } else {
                            console.warn('Geocoder failed due to: ' + status);
                        }
                    });
                });
            } else {
                console.warn("location not found");
            }
        }

        // Handle showing modal dialog
        $('#exampleModal').on('show.bs.modal', function (event) {
            var button = $(event.relatedTarget) // Button that triggered the modal
            var imageTitle = button.data('image-title') // Extract info from data-* attributes
            // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
            var modal = $(this)
            modal.find('.modal-title').text('Share "' + imageTitle + '"')
            var locationText = localStorage.getItem('shortLocationText') === '' ? localStorage.getItem(
                'locationText') : localStorage.getItem('shortLocationText');
            modal.find('.modal-body').text('Found this in ' + locationText +
                ' with StreetArt Finder!')
        })
    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAiBf9WrNYKOB-klGNa_HRZRfqu1hSh_Bw">
    </script>
</body>

</html>